$program
	: $stmt_seq		$$ = $1
		
$stmt_seq
	: $stmt_seq ; 				$$ = make(";", $0, $2)
	| $stmt_seq ; $stmt			$$ = make(";", $1, $3)
	| $stmt_seq newline			$$ = make("newline", $0, $2)
	| $stmt_seq newline $stmt	$$ = make("newline", $1, $3)
	| $stmt						$$ = $1
	
$stmt
	: $if_stmt			$$ = $1
	| $while_stmt		$$ = $1
	| $assign_stmt		$$ = $1
	| $read_stmt		$$ = $1
	| $write_stmt		$$ = $1
	| $do_while_stmt	$$ = $1
	| $function_def		$$ = $1
	| $function_call	$$ = $1
	
$if_stmt
	: if ( $exp ) { }									$$ = make("if_stmt", $4, $0, $0)
	| if ( $exp ) { $stmt_seq }							$$ = make("if_stmt", $5, $2, $0)
	| if ( $exp ) { } else { }							$$ = make("if_stmt", $7, $0, $0)
	| if ( $exp ) { } else { $stmt_seq }				$$ = make("if_stmt", $8, $0, $2)
	| if ( $exp ) { $stmt_seq } else { }				$$ = make("if_stmt", $8, $5, $0)	
	| if ( $exp ) { $stmt_seq } else { $stmt_seq }		$$ = make("if_stmt", $9, $6, $2)
	
$while_stmt
	: while ( $exp ) { }				$$ = make("while_stmt", $4, $0)
	| while ( $exp ) { $stmt_seq }		$$ = make("while_stmt", $5, $2)
	
$do_while_stmt
	: do { } while ( $exp )				$$ = make("do_while_stmt", $2, $0)
	| do { $stmt_seq } while ( $exp )	$$ = make("do_while_stmt", $2, $6)
	
$assign_stmt
	: identifier = $exp					$$ = make("assign_stmt", $3, $1)
	
$read_stmt
	: read identifier					$$ = make("read_stmt", $2, $1)
	
$write_stmt
	: write identifier					$$ = make("write_stmt", $2, $1)
	
$exp 
	: $simple_exp < $simple_exp			$$ = make("<", $3, $1)
	| $simple_exp <= $simple_exp		$$ = make("<=", $3, $1)
	| $simple_exp == $simple_exp		$$ = make("==", $3, $1)
	| $simple_exp >= $simple_exp		$$ = make(">=", $3, $1)
	| $simple_exp > $simple_exp			$$ = make(">", $3, $1)
	| $simple_exp						$$ = $1
	
$simple_exp
	: $simple_exp + $term				$$ = make("+", $3, $1)
	| $simple_exp - $term				$$ = make("-", $3, $1)
	| $term								$$ = $1
	
$term
	: $term * $factor					$$ = make("*", $3, $1)
	| $term / $factor					$$ = make("/", $3, $1)
	| $factor							$$ = $1
	
$factor
	: ( $exp )							$$ = $2
	| number							$$ = constant($1)
	| identifier						$$ = symbol($1)
	
$function_def
	: function identifier ( ) { }							$$ = make("function_def", $5, $0, $0)
	| function identifier ( ) { $stmt_seq }					$$ = make("function_def", $6, $0, $2)
	| function identifier ( $argument_list ) { }			$$ = make("function_def", $6, $4, $0)
	| function identifier ( $argument_list ) { $stmt_seq }	$$ = make("function_def", $7, $5, $2)
	
$function_call
	: identifier ( )					$$ = make("function_call", $0)
	| identifier ( $argument_list )		$$ = make("function_call", $2)
	
$argument_list
	: $factor							$$ = make("argument_list", $0, $1)
	| $argument_list, $factor			$$ = make("argument_list", $3, $1)