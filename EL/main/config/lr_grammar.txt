Program
	: TopStatements	$$ = $1

TopStatements
	: epsilon				$$ = $1
	| TopStatementsPrefix	$$ = $1

TopStatementsPrefix
	: TopStatement						$$ = $1
	| TopStatementsPrefix TopStatement	$$ = make("statements", $2, $1)

TopStatement
	: Statement				$$ = $1

Statement
	: EmptyStatement					$$ = $1
	| ExpressionStatement Semicolon		$$ = $2

EmptyStatement
	: ;						$$ = $1
	
Semicolon
	: ;						$$ = $1
	
ExpressionStatement
	: Expression			$$ = $1
	
Expression
	: AssignmentExpression	$$ = $1
	
AssignmentExpression
	: LeftSideExpression = AssignmentExpression	$$ = make("assignment", $3, $1)
	| SimpleExpression							$$ = $1

LeftSideExpression
	: CallExpression	$$ = $1
	
CallExpression
	: PrimaryExpression	$$ = $1
	
PrimaryExpression
	: SimpleExpression	$$ = $1
	
SimpleExpression
	: Number		$$ = $1
	| String		$$ = $1
	| Identifier	$$ = $1
	
Identifier
	: identifier	$$ = symbol($1)
	
Number
	: number		$$ = constant($1)

String
	: string		$$ = literal($1)